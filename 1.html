<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ë–∏–ª–µ—Ç—ã –ü–î–î - EasyDrive</title>
<style>
  body {
    margin: 0;
    background: #f4f4f4;
    display: flex;
    justify-content: center;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }
  .page {
    width: 380px;                 /* —Ç—Ä–µ–±—É–µ–º–∞—è —à–∏—Ä–∏–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
    background: #fff;
    box-shadow: 0 2px 10px rgba(0,0,0,.06);
    overflow: hidden;
  }
  .road-wrap {
    position: relative;
    width: 100%;
    line-height: 0;
    user-select: none;
    margin-top: 10px;
  }
  .road-wrap img {
    display: block;
    width: 100%;                  /* –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É */
    height: auto;
  }

  /* –í–∞—Ä–∏–∞–Ω—Ç 2: –∫—Ä—É–≥–ª—ã–µ –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ –≤—ã—Å–æ—Ç–µ 34px */
  .node {
    position: absolute;
    transform: translate(-50%, -50%); /* —Ü–µ–Ω—Ç—Ä –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–µ */
    width: 34px;                      /* —Ñ–∏–∫—Å–∏—Ä—É–µ–º –∫—Ä—É–≥–ª—ã–π —Ä–∞–∑–º–µ—Ä */
    height: 34px;
    padding: 0;                        /* —É–±–∏—Ä–∞–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
    border-radius: 50%;                /* –∫—Ä—É–≥ */
    border: 1px solid #b85a00;
    background: linear-gradient(#ffa733, #ff7f0e);
    box-shadow: 0 2px 0 #b85a00, 0 6px 14px rgba(0,0,0,.18);
    color: #fff;
    font-weight: 700;
    font-size: 14px;                   /* —á—É—Ç—å –º–µ–Ω—å—à–µ –¥–ª—è –¥–≤—É–∑–Ω–∞—á–Ω—ã—Ö —á–∏—Å–µ–ª */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    cursor: pointer;
  }
  .node:active {
    transform: translate(-50%, -50%) translateY(1px);
    box-shadow: 0 1px 0 #b85a00, 0 3px 10px rgba(0,0,0,.20);
  }

  .header {
    background: #ffffff;
    color: #ff8c00;
    padding: 25px 15px;
    min-height: 100px;
    flex-direction: column;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 2px 10px rgba(0,0,0,.06);
    position: relative;
    z-index: 1000;
  }

  .header-content {
    margin-bottom: 15px;
  }

  .header-logo {
    width: 80px;
    height: 80px;
    background-image: url('logo_gorizont1.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
  }

  .header h1 {
    font-size: 24px;
    font-weight: 700;
    margin: 0 0 5px 0;
    color: #ff8c00;
    text-shadow: 2px 2px 4px rgba(255, 140, 0, 0.3);
  }

  .header p {
    font-size: 14px;
    margin: 0;
    color: #ff8c00;
    opacity: 0.9;
  }

  .back-btn {
    position: absolute;
    top: 15px;
    left: 15px;
    background: rgba(255,140,0,.9);
    color: #fff;
    padding: 8px 12px;
    border-radius: 20px;
    font-size: 12px;
    text-decoration: none;
    z-index: 1001;
    transition: background .25s;
  }
  .back-btn:hover {
    background: rgba(255,140,0,1);
  }

  .random-btn {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, #ff8c00 0%, #ff6b35 100%);
    color: #fff;
    padding: 15px 25px;
    border-radius: 30px;
    font-size: 16px;
    font-weight: 600;
    text-decoration: none;
    box-shadow: 0 4px 15px rgba(255, 140, 0, 0.3);
    z-index: 1000;
    transition: all .25s;
  }
  .random-btn:hover {
    transform: translateX(-50%) translateY(-2px);
    box-shadow: 0 6px 20px rgba(255, 140, 0, 0.4);
  }
</style>
</head>
<body>
  <div class="page">
    <div class="road-wrap" id="road">
      <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ—Ä–æ–≥–∏ —Å –±–∏–ª–µ—Ç–∞–º–∏ -->
      <img id="roadImg" src="1.png" alt="–î–æ—Ä–æ–≥–∞ —Å –±–∏–ª–µ—Ç–∞–º–∏ –ü–î–î" width="832" height="4584" />
    </div>
  </div>

  <div class="header">
    <div class="header-content">
      <h1>–ë–∏–ª–µ—Ç—ã –ü–î–î</h1>
      <p>–í—ã–±–µ—Ä–∏—Ç–µ –±–∏–ª–µ—Ç –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è</p>
    </div>
    <div class="header-logo"></div>
  </div>
  <a href="index.html" class="back-btn">‚Üê –ù–∞–∑–∞–¥</a>
  <a href="#" class="random-btn" onclick="openRandomTicket()">üé≤ –°–ª—É—á–∞–π–Ω—ã–π –≤–æ–ø—Ä–æ—Å</a>

<script>
  // –û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –≤–∞—à–µ–º –≤–≤–æ–¥–µ.
  // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
  const ORIGINAL = { w: 832, h: 4584 };

  // –ë–∞–∑–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏ —Ü–∏–∫–ª–∞ –∏–∑ 4 –∫–Ω–æ–ø–æ–∫ (X —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω, Y –±–∞–∑–æ–≤—ã–π):
  // 1: x=549, y=4441 (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
  // 2: x=411, y=4328
  // 3: x=299, y=4227
  // 4: x=411, y=4121
  const BASE = [
    { x: 549, y: 4441 }, // —Ç–∏–ø 1: 1,5,9,13,17,21,25,29,33,37
    { x: 411, y: 4328 }, // —Ç–∏–ø 2: 2,6,10,14,18,22,26,30,34,38
    { x: 299, y: 4227 }, // —Ç–∏–ø 3: 3,7,11,15,19,23,27,31,35,39
    { x: 411, y: 4121 }  // —Ç–∏–ø 4: 4,8,12,16,20,24,28,32,36,40
  ];

  // –®–∞–≥ –ø–æ Y –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è–º–∏ —Ç–∏–ø–∞:
  const STEP_Y = 438;     // —É–º–µ–Ω—å—à–µ–Ω–∏–µ Y –Ω–∞ 455 (–ø–æ –≤–∞—à–µ–º—É —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é)
  const TOTAL  = 40;      // –≤—Å–µ–≥–æ –∫–Ω–æ–ø–æ–∫

  // –°—Ç—Ä–æ–∏–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã 1‚Äì40 –ø–æ –ø—Ä–∞–≤–∏–ª—É —Ü–∏–∫–ª–∞
  const coords = [];
  for (let n = 1; n <= TOTAL; n++) {
    const idx = (n - 1) % 4;               // —Ç–∏–ø 0..3 (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç 1..4)
    const k   = Math.floor((n - 1) / 4);   // –Ω–æ–º–µ—Ä ¬´—ç—Ç–∞–∂–∞¬ª (0..9)
    const x   = BASE[idx].x;
    const y   = BASE[idx].y - STEP_Y * k;  // Y —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –Ω–∞ 455*k
    coords.push({ n, x, y });
  }

  const roadEl = document.getElementById('road');
  const imgEl  = document.getElementById('roadImg');

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –±–∏–ª–µ—Ç–∞
  function openRandomTicket() {
    const randomTicket = Math.floor(Math.random() * 40) + 1;
    window.location.href = 'exam.html?ticket=' + randomTicket;
  }

  function renderNodes() {
    // –æ—á–∏—Å—Ç–∫–∞
    roadEl.querySelectorAll('.node').forEach(el => el.remove());

    // –º–∞—Å—à—Ç–∞–± –ø–æ–¥ 380px
    const scale = roadEl.clientWidth / ORIGINAL.w;
    roadEl.style.height = (ORIGINAL.h * scale) + 'px';

    // —Å–Ω–∏–∑—É-–≤–≤–µ—Ä—Ö: –±–æ–ª—å—à–µ Y ‚Äî –Ω–∏–∂–µ
    const sorted = [...coords].sort((a, b) => b.y - a.y);

    for (const { n, x, y } of sorted) {
      const a = document.createElement('a');
      a.className = 'node';
      a.textContent = String(n);
      a.href = '#node-' + n;
      a.style.left = (x * scale) + 'px';
      a.style.top  = (y * scale) + 'px';
      a.setAttribute('aria-label', '–ö–Ω–æ–ø–∫–∞ ' + n);
      a.addEventListener('click', (e) => {
        e.preventDefault();
        window.location.href = 'exam.html?ticket=' + n;
      });
      roadEl.appendChild(a);
    }
  }


  if (imgEl.complete) renderNodes();
  else imgEl.addEventListener('load', renderNodes);
  window.addEventListener('resize', renderNodes);
</script>
</body>
</html>
